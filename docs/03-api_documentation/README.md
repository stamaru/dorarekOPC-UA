# API ドキュメント

このディレクトリには、dorarekOPC-UAプロジェクトのAPI（アプリケーションプログラミングインターフェース）に関するドキュメントが含まれています。

## コンテンツ

- [v1/](./v1/) - APIバージョン1のドキュメント
  - index.html - APIドキュメントのHTMLバージョン（作成予定）
  - openapi_spec.yaml - OpenAPI仕様ファイル（作成予定）

## API概要

dorarekOPC-UAプロジェクトは、以下の主要APIエンドポイントを提供します：

1. **デバイス管理API** - エッジゲートウェイデバイスの登録、設定、モニタリング
2. **イベント管理API** - 設備停止イベントの取得、検索、フィルタリング
3. **ビデオアセットAPI** - 記録された映像クリップの取得と管理
4. **分析結果API** - AIによる分析結果の取得と検索
5. **認証・認可API** - ユーザー認証と権限管理

## API規約

- RESTful設計原則に従います
- JSON形式でデータを送受信します
- 標準的なHTTPステータスコードを使用します
- APIバージョン番号をURLパスに含めます（例: `/api/v1/resources`）
- 認証はJWTトークンベースで行います

## APIドキュメント生成

APIドキュメントは、OpenAPI（Swagger）仕様に基づいて自動生成されます。更新手順は以下の通りです：

1. `openapi_spec.yaml`ファイルを編集してAPI定義を更新
2. ドキュメント生成ツールを実行（例: `npm run generate-api-docs`）
3. 生成されたHTMLとその他のアセットを`v1/`ディレクトリに配置

## APIバージョニング

APIに重大な変更がある場合は、新しいバージョン番号を発行します：

- 後方互換性のある変更はマイナーバージョンアップデート
- 非互換変更は新しいメジャーバージョンとして実装
- 古いAPIバージョンは合理的な期間（通常は6ヶ月以上）サポートされ、その後廃止予定となる